"use strict";
/* gpsNav.js | (c) Donald Leung.  All rights reserved. | MIT Licensed */
var zoom,width,height,permissionDeniedImage,permissionDeniedMessage,positionUnavailableImage,positionUnavailableMessage,timeoutImage,timeoutMessage,unknownErrorImage,unknownErrorMessage; var gpsNav={init:function(settings){if(!settings){zoom=14;width=400;height=300;permissionDeniedImage="error.png";permissionDeniedMessage="Permission denied.";positionUnavailableImage="error.png";positionUnavailableMessage="Position unavailable.";timeoutImage="error.png";timeoutMessage="Timed out.";unknownErrorImage="error.png";unknownErrorMessage="An unknown error occurred.";}else{if(settings.zoom){zoom=settings.zoom;}else{zoom=14;}if(settings.width){width=settings.width;}else{width=400;}if(settings.height){height=settings.height;}else{height=300;}if(!settings.error){permissionDeniedImage="error.png";permissionDeniedMessage="Permission denied.";positionUnavailableImage="error.png";positionUnavailableMessage="Position unavailable.";timeoutImage="error.png";timeoutMessage="Timed out.";unknownErrorImage="error.png";unknownErrorMessage="An unknown error occurred.";}else{if(settings.error.permissionDenied.image){permissionDeniedImage=settings.error.permissionDenied.image;}else{permissionDeniedImage="error.png";}if(settings.error.permissionDenied.text){permissionDeniedMessage=settings.error.permissionDenied.text;}else{permissionDeniedMessage="Permission denied.";}if(settings.error.positionUnavailable.image){positionUnavailableImage=settings.error.positionUnavailable.image;}else{positionUnavailableImage="error.png";}if(settings.error.positionUnavailable.text){positionUnavailableMessage=settings.error.positionUnavailable.text}else{positionUnavailableMessage="Position unavailable.";}if(settings.error.timeout.image){timeoutImage=settings.error.timeout.image;}else{timeoutImage="error.png";}if(settings.error.timeout.text){timeoutMessage=settings.error.timeout.text;}else{timeoutMessage="Timed out.";}if(settings.error.unknownError.image){unknownErrorImage=settings.error.unknownError.image;}else{unknownErrorImage="error.png";}if(settings.error.unknownError.text){unknownErrorMessage=settings.error.unknownError.text;}else{unknownErrorMessage="An unknown error occurred.";}}}gpsNav.getCoords();},getCoords:function(){navigator.geolocation.watchPosition(gpsNav.createMap,gpsNav.displayError);},createMap:function(position){document.getElementById("error").innerHTML="";document.getElementById("map").src="http://maps.googleapis.com/maps/api/staticmap?center=" + position.coords.latitude + "," + position.coords.longitude + "&zoom=" + zoom + "&size=" + width + "x" + height + "&sensor=false";},displayError:function(error){switch(error.code){case error.PERMISSION_DENIED:document.getElementById("map").src=permissionDeniedImage;document.getElementById("error").innerHTML=permissionDeniedMessage;break;case error.POSITION_UNAVAILABLE:document.getElementById("map").src=positionUnavailableImage;document.getElementById("error").innerHTML=positionUnavailableMessage;break;case error.TIMEOUT:document.getElementById("map").src=timeoutImage;document.getElementById("error").innerHTML=timeoutMessage;break;case error.UNKNOWN_ERROR:document.getElementById("map").src=unknownErrorImage;document.getElementById("error").innerHTML=unknownErrorMessage;break;}}};